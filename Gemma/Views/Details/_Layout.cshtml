@using Microsoft.AspNet.Identity
<!DOCTYPE html>
<html>
<head>
    @{
        if (Session["CartItemCount"] == null)
        {
            Session["CartItemCount"] = 0;
        }
    }
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - 我的 ASP.NET 應用程式</title>
    @Styles.Render("~/Contentback/css")
    @Scripts.Render("~/bundles/modernizr")
    <link href="~/Assets/css/FixedMenu.css" rel="stylesheet" />
    <style>
        .fixed {
            height: 70px !important;
            animation-delay: 100ms;
        }
    </style>

    @RenderSection("topCSS", required: false)
    @RenderSection("topJS", required: false)
</head>
<body>
    <div>
        <div class="container-fluid header">
            <br />
            <div class="row">
                <div class="logo">
                    <a href="@Url.Action("DaniellaGemma","Home")"><img src="~/Assets/images/Icons/logo.png" /></a>

                </div>
                <div class="header-nav row">

                    <ul class="nav">
                        <li class="nav-item">
                            <a class="nav-link active" href="@Url.Action("FindBrand","OnlineStore")">ONLINE STORE</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="@Url.Action("CollectionPhotos","Collection")">COLLECTION</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="@Url.Action("Index","Journall")">JOURNAL</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">SHOP</a>
                        </li>
                        @if (User.Identity.IsAuthenticated)
                        {
                            <li>
                                <a class="nav-link" href="@Url.Action("MemberInfo", "MemberCenter", new { id = User.Identity.GetUserId() })">@User.Identity.Name</a>
                            </li>
                        }
                    </ul>

                    @if (Request.IsAuthenticated)
                    {
                        using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm", @class = "navbar-right" }))
                        {
                            @Html.AntiForgeryToken()


                            <ul class="nav header-tool">

                                <li class="account nav-item dropdown">

                                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <img src="~/Assets/images/Icons/User_Mark.png" />
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                        @Html.ActionLink("マイページ", "MemberInfo", "MemberCenter", new { id = User.Identity.GetUserId() }, new { @class = "dropdown-item" })
                                        @Html.ActionLink("ポイント履歴", "OrderSearch", "MemberCenter", new { id = User.Identity.GetUserId() }, new { @class = "dropdown-item" })
                                        @if (User.Identity.Name == "Admin@gmail.com")
                                        {
                                            @Html.ActionLink("バックグラウンド管理", "Admin", "Account", null, new { @class = "dropdown-item" })
                                        }
                                        <a class="dropdown-item" href="javascript:document.getElementById('logoutForm').submit()">ログアウト</a>
                                    </div>

                                </li>


                                <li class="bookmark nav-item">
                                    <a href="@Url.Action("Index", "BookMark")" class="nav-link"><img src="~/Assets/images/Icons/Heart_Mark.png" /></a>
                                </li>

                                <li class="cart nav-item">
                                    <a href="@Url.Action("CartView", "Cart")" class="nav-link"><img src="~/Assets/images/Icons/Cart_Mark.png" /><span id="MyCart">(@Session["CartItemCount"].ToString())</span></a>
                                </li>

                            </ul>

                        }
                    }
                    else
                    {
                        <ul class="nav header-tool">

                            <li class="account nav-item dropdown">

                                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <img src="~/Assets/images/Icons/User_Mark.png" />
                                </a>
                                <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                    <a class="dropdown-item" href="~/Account/Register">新規会員登録</a>
                                    <a class="dropdown-item" href="~/Account/Login">LOGIN</a>
                                </div>

                            </li>


                            <li class="bookmark nav-item">
                                <a href="@Url.Action("Index", "BookMark")" class="nav-link"><img src="~/Assets/images/Icons/Heart_Mark.png" /></a>
                            </li>

                            <li class="cart nav-item">
                                <a href="@Url.Action("CartView", "Cart")" class="nav-link"><img src="~/Assets/images/Icons/Cart_Mark.png" /><span id="MyCart">(@Session["CartItemCount"].ToString())</span></a>
                            </li>

                        </ul>

                    }
                </div>
            </div>
            <br />
        </div>
        <div class="PaddingTopCSS">

        </div>
        @Html.Partial("_Social_Icons")
        @RenderBody()
        @Html.Partial("_Footer")
    </div>

    @Scripts.Render("~/bundles/jquery")
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>    @Scripts.Render("~/bundles/chartjs")
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    @Scripts.Render("~/bundles/jqueryval")
    <script src="~/Assets/js/FixedMenuForIG.js"></script>
    <script>
        $(document).ready();

        function sticky() {
            if (window.pageYOffset > 50) {
                document.querySelector("nav").classList.add("fixed");
            }

            if (window.pageYOffset < 50) {
                document.querySelector("nav").classList.remove("fixed");
            }
        }

        function sticky2() {
            if (window.pageYOffset > 50) {
                document.querySelector("img").classList.add("photofixed");
            }

            if (window.pageYOffset < 50) {
                document.querySelector("img").classList.remove("photofixed");
            }
        }
    </script>


    @RenderSection("scripts", required: false)
    @RenderSection("endCSS", required: false)
    @RenderSection("endJS", required: false)
</body>
</html>
